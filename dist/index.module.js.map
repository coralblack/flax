{"mappings":"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","sources":["src/index.ts","src/components/FxButton.tsx","src/hooks/useRequest.ts","src/components/FxNotification.tsx","src/components/FxNotificationContainer.tsx","src/utils.ts","src/request.ts","src/components/FxGuard.tsx"],"sourcesContent":["export * from './components/FxButton';\nexport * from './components/FxGuard';\nexport * from './hooks/useRequest';\n\nexport {\n  setDefaultHeaders,\n  setBaseUrl,\n  setDefaultTransformResponse,\n  request,\n} from './request';\n","import React, {Component, ReactNode} from 'react';\nimport {FxNotificationType} from './FxNotification';\nimport {notify} from '../hooks/useRequest';\nimport {\n  DoneDelegate,\n  ErrorDelegate,\n  FxApiRequest,\n  Notifiable,\n  request,\n  SucceedDelegate,\n} from '../request';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\ninterface FxButtonProps<TR, TE, TRR, TER> {\n  tag?: string;\n  children?: ReactNode;\n  className?: string;\n  label?: string;\n\n  api: FxApiRequest<TR, TE, TRR, TER>;\n  done?: DoneDelegate<TR>;\n  success?: SucceedDelegate<TRR>;\n  error?: ErrorDelegate<TER>;\n}\n\ninterface FxButtonStates {\n  busy: boolean;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class FxButton<TR = any, TE = any, TRR = TR, TER = TE> extends Component<\n  FxButtonProps<TR, TE, TRR, TER>,\n  FxButtonStates\n> {\n  constructor(props: FxButtonProps<TR, TE, TRR, TER>) {\n    super(props);\n\n    this.state = {\n      busy: false,\n    };\n  }\n\n  private noti(payload: Notifiable, type: FxNotificationType) {\n    notify(payload, type);\n  }\n\n  handleClick() {\n    if (this.state.busy) return;\n\n    this.setState({...this.state, busy: true});\n\n    const {success, error, done} = this.props;\n\n    request<TR, TE, TRR, TER>({...this.props.api})\n      .then(res => {\n        this.noti(success && success(res.reduced, res.response), 'SUCC');\n        this.noti(done && done(res.data, null, res.response), 'INFO');\n        this.setState({...this.state, busy: false});\n      })\n      .catch(err => {\n        const type =\n          typeof err.response?.status === 'number' && err.response?.status < 500\n            ? 'WARN'\n            : 'ERROR';\n        this.noti(error && error(err.response?.reduced, err), type);\n        this.noti(done && done(err.response?.data, err, err.response), type);\n        this.setState({...this.state, busy: false});\n      });\n  }\n\n  render() {\n    const ButtonTag = `${\n      this.props.tag || 'button'\n    }` as keyof JSX.IntrinsicElements;\n\n    return (\n      <ButtonTag\n        className={`flax fx-button ${this.state.busy ? '--busy' : ''} ${\n          this.props.className || ''\n        }`}\n        onClick={() => this.handleClick()}\n        disabled={this.state.busy}\n      >\n        {this.props.children || this.props.label}\n      </ButtonTag>\n    );\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport PCancelable from 'p-cancelable';\nimport {useState} from 'react';\nimport {\n  FxNotificationType,\n  useNotification,\n} from '../components/FxNotification';\nimport {\n  Data,\n  DoneDelegate,\n  ErrorDelegate,\n  FxApiRequest,\n  Notifiable,\n  Queries,\n  Headers,\n  request,\n  SucceedDelegate,\n} from '../request';\n\nexport interface UseRequestProps<TR, TE, TRR = TR, TER = TE> {\n  done?: DoneDelegate<TR>;\n  success?: SucceedDelegate<TRR>;\n  error?: ErrorDelegate<TER>;\n}\n\nexport const notify = (payload: Notifiable, type: FxNotificationType) => {\n  if (!payload) return;\n  if (typeof payload === 'string') {\n    payload = {\n      message: payload,\n    };\n  }\n\n  if (!payload.message) return;\n  payload.type = payload.type || type;\n\n  if (type === 'WARN' || type === 'ERROR') {\n    payload.delay = payload.delay || 10000;\n  }\n\n  const {alert: notiAlert} = useNotification({});\n  notiAlert(payload);\n};\n\nexport function useRequest<TR = any, TE = any, TRR = TR, TER = TE>(\n  api: FxApiRequest<TR, TE, TRR, TER>,\n  props?: UseRequestProps<TR, TE, TRR, TER>\n) {\n  const [reqId, setReqId] = useState(0);\n  const [resp, setResp] = useState<{\n    busy: boolean;\n    response: TRR | undefined;\n    errorResponse: TER | undefined;\n  }>({busy: false, response: undefined, errorResponse: undefined});\n\n  const {success, done, error} = props || {};\n  const queues: Array<PCancelable<any>> = [];\n\n  const requestWrapper = (wrapperParams?: {\n    data?: Data;\n    query?: Queries;\n    headers?: Headers;\n  }): boolean => {\n    if (resp.busy) return false;\n\n    setResp({\n      busy: true,\n      response: undefined,\n      errorResponse: undefined,\n    });\n\n    const reqParams = {...api};\n\n    if (wrapperParams?.data) {\n      reqParams.data = wrapperParams.data;\n    }\n    if (wrapperParams?.query) {\n      reqParams.query = wrapperParams?.query;\n    }\n    if (wrapperParams?.headers) {\n      reqParams.headers = wrapperParams?.headers;\n    }\n\n    const rp = request<TR, TE, TRR, TER>(reqParams);\n\n    rp.then(res => {\n      notify(success && success(res.reduced, res.response), 'SUCC');\n      notify(done && done(res.data, null, res.response), 'INFO');\n\n      setReqId(reqId + 1);\n      setResp({\n        busy: false,\n        response: res.reduced,\n        errorResponse: undefined,\n      });\n    }).catch(err => {\n      const type =\n        typeof err.response?.status === 'number' && err.response?.status < 500\n          ? 'WARN'\n          : 'ERROR';\n      notify(error && error(err.response?.reduced || err, err), type);\n      notify(done && done(err.response?.data, err, err.response), type);\n\n      setReqId(reqId + 1);\n      setResp({\n        busy: false,\n        response: err.response?.reduced,\n        errorResponse: undefined,\n      });\n    });\n\n    queues.push(rp);\n\n    return true;\n  };\n\n  const cancel = () => {\n    let rp;\n\n    while ((rp = queues.pop())) {\n      rp.cancel();\n    }\n  };\n\n  return {\n    reqId,\n    request: requestWrapper,\n    response: resp,\n    cancel,\n  };\n}\n","import React, {useCallback, useEffect, useState} from 'react';\nimport ReactDOM, {render} from 'react-dom';\nimport {useNotificationContainer} from './FxNotificationContainer';\nimport {classNames} from '../utils';\n\nexport type FxNotificationType = 'SUCC' | 'WARN' | 'ERROR' | 'INFO';\nexport interface FxNotificationPayload {\n  type?: FxNotificationType;\n  title?: string;\n  message: string;\n}\nexport interface FxNotificationAttrs extends FxNotificationPayload {\n  delay?: number;\n}\nexport type FxNotificationToast = string | FxNotificationPayload;\n\ninterface UseNotificationProps {}\ninterface UseNotification {\n  container: HTMLElement;\n  alert: (attrs: FxNotificationPayload) => void;\n}\n\ninterface ProgressBar {\n  pause: () => void;\n  resume: () => void;\n  done: () => void;\n}\n\nfunction Progress(\n  callback: () => void,\n  elem: HTMLSpanElement,\n  delay: number\n): ProgressBar {\n  let timerId = setTimeout(callback, delay);\n  let remaining = delay;\n  let start = new Date().getTime();\n\n  const anim = () => {\n    const prev = ((delay - remaining) / delay) * 100;\n\n    if (elem) {\n      elem.style.width =\n        String(\n          prev + ((new Date().getTime() - start) / remaining) * (100 - prev)\n        ) + '%';\n    }\n  };\n\n  let animInterval = setInterval(anim, 5);\n\n  return {\n    pause() {\n      clearTimeout(timerId);\n      clearInterval(animInterval);\n      remaining -= new Date().getTime() - start;\n    },\n    resume() {\n      start = new Date().getTime();\n\n      clearTimeout(timerId);\n      clearInterval(animInterval);\n\n      timerId = setTimeout(callback, remaining);\n      animInterval = setInterval(anim, 5);\n    },\n    done() {\n      clearTimeout(timerId);\n      clearInterval(animInterval);\n    },\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function useNotification(props: UseNotificationProps): UseNotification {\n  const {container} = useNotificationContainer();\n\n  return {\n    container,\n    alert: (attrs: FxNotificationAttrs) => {\n      const {delay, ...props} = attrs;\n      const wrapper = document.createElement('div');\n      wrapper.classList.add('fx-notification-wrapper');\n      container.appendChild(wrapper);\n      render(<FxNotification {...props} />, wrapper, () => {\n        const closeButton = wrapper.getElementsByTagName('button');\n        const progressBar = wrapper.getElementsByTagName('span');\n\n        let progress: ProgressBar | undefined = undefined;\n\n        const cb = () => {\n          wrapper.classList.add('--hide');\n          !!progress && progress.done();\n\n          setTimeout(() => {\n            ReactDOM.unmountComponentAtNode(wrapper);\n            wrapper.remove();\n          }, 450);\n        };\n\n        closeButton[0]?.addEventListener('click', () => {\n          cb();\n        });\n\n        progress = Progress(cb, progressBar[0], Math.min(delay || 5000, 5000));\n\n        wrapper.addEventListener('mouseover', () => {\n          !!progress && progress.pause();\n        });\n\n        wrapper.addEventListener('mouseout', () => {\n          !!progress && progress.resume();\n        });\n      });\n    },\n  };\n}\n\nfunction Type(type: FxNotificationType) {\n  if (!type || type === 'INFO') return null;\n\n  return (\n    <>\n      <div className=\"--icon\">\n        {type === 'SUCC' && (\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M5 13l4 4L19 7\"\n            />\n          </svg>\n        )}\n        {type === 'WARN' && (\n          <>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n              />\n            </svg>\n          </>\n        )}\n        {type === 'ERROR' && (\n          <>\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </>\n        )}\n      </div>\n    </>\n  );\n  //if (type === 'WARN') return <div>W</div>;\n  //if (type === 'ERROR') return <div>E</div>;\n}\n\ninterface FxNotificationProps extends FxNotificationPayload {}\n\nexport function FxNotification(props: FxNotificationProps) {\n  const {type, title, message} = props;\n\n  useEffect(() => {\n    // Initialize\n\n    return () => {\n      // Clear\n    };\n  });\n\n  return (\n    <>\n      <div\n        className={classNames(\n          'flax fx-notification',\n          `--${(type || 'info').toLocaleLowerCase()}`\n        )}\n      >\n        {type && Type(type)}\n        {title && <strong>{title}</strong>}\n        {message}\n        <button className=\"close\">Close</button>\n        <div className=\"progress\">\n          <span />\n        </div>\n      </div>\n    </>\n  );\n}\n","interface UseNotificationContainer {\n  container: HTMLElement;\n}\n\nconst fxNotificationContainerId = 'fx-notification-container';\nexport function useNotificationContainer(): UseNotificationContainer {\n  const container =\n    document.getElementById(fxNotificationContainerId) ||\n    (() => {\n      const dom = document.createElement('div');\n      dom.id = fxNotificationContainerId;\n      dom.classList.add('flax');\n      dom.classList.add('fx-notification-container');\n      document.body.appendChild(dom);\n\n      return dom;\n    })();\n\n  return {\n    container,\n  };\n}\n","export function classNames(\n  ...args: Array<\n    string | boolean | {[key: string]: boolean | undefined} | undefined | null\n  >\n): string {\n  return args\n    .reduce<Array<string>>((o, e) => {\n      if (typeof e === 'string' && e) o.push(e);\n      else if (Array.isArray(e)) o.push(classNames(e));\n      else if (e && typeof e === 'object') {\n        Object.keys(e).forEach(k => {\n          if (e[k]) o.push(k);\n        });\n      }\n\n      return o;\n    }, [])\n    .join(' ');\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport axios, {AxiosError, AxiosResponse, ResponseType} from 'axios';\nimport NodeCache from 'node-cache';\nimport PCancelable from 'p-cancelable';\nimport queryString from 'query-string';\nimport {MutableRefObject} from 'react';\nimport {FxNotificationToast} from './components/FxNotification';\n\nconst cache = new NodeCache({maxKeys: 100});\n\nexport type Notifiable = FxNotificationToast | any;\nexport type DoneDelegate<T> = (\n  res: T | null,\n  error: Error | null,\n  resp?: AxiosResponse | null\n) => Notifiable;\nexport type SucceedDelegate<T> = (data: T, resp: AxiosResponse) => Notifiable;\nexport type ErrorDelegate<T> = (data: T, error: AxiosResponse<T>) => Notifiable;\n\nexport type QueryType = string | number | bigint | boolean;\nexport type Queries = {[key: string]: QueryType | QueryType[]};\nexport type Headers = {[key: string]: string};\ntype DataPrimTypes = string | number | bigint | boolean | null;\ntype DataObjTypes = Array<DataPrimTypes> | {[key: string]: DataPrimTypes};\ntype DataTypeValues =\n  | DataPrimTypes\n  | DataObjTypes\n  | {[key: string]: DataObjTypes}\n  | Array<DataObjTypes>;\nexport type DataType = {\n  [key: string]:\n    | DataTypeValues\n    | MutableRefObject<HTMLElement | null>\n    | DataType;\n};\nexport type Data = DataType | (() => DataType) | string;\n\nexport type FxResp<T, TR> = {data: T; reduced: TR; response: AxiosResponse<T>};\n\ninterface FxErrorResponse<T, TR> extends AxiosResponse<T> {\n  reduced: TR;\n}\n\nexport interface FxError<T, TR> extends AxiosError<T> {\n  response?: FxErrorResponse<T, TR>;\n}\n\nexport interface FxApiRequest<TR = any, TE = any, TRR = TR, TER = TE> {\n  method: 'GET' | 'POST' | 'DELETE' | 'PATCH' | 'PUT';\n  url: string;\n  cacheMaxAge?: number;\n  throttle?: boolean;\n  delay?: number;\n  responseType?: ResponseType;\n  query?: Queries;\n  headers?: Headers;\n  data?: Data;\n  reducer?: (data: TR) => TRR;\n  errReducer?: (data: TE, error: AxiosError<TE>) => TER;\n}\n\ninterface RequestProps<TR, TE, TRR, TER>\n  extends FxApiRequest<TR, TE, TRR, TER> {\n  refreshId?: number;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Resolver = (data: any) => void;\ntype Rejector = (reason: Error) => void;\ntype Canceller = () => void;\n\nconst resolving = (\n  resolve: Resolver,\n  reject: Rejector,\n  props: RequestProps<any, any, any, any>,\n  resp: AxiosResponse | null,\n  error: FxError<any, any> | null\n) => {\n  if (error) {\n    if (error.response?.data) {\n      if (props.errReducer) {\n        error.response.reduced = props.errReducer(error.response?.data, error);\n      } else {\n        error.response.reduced = error.response?.data;\n      }\n    }\n\n    reject(error);\n  } else {\n    resolve({\n      data: resp?.data,\n      reduced: props.reducer ? props.reducer(resp?.data) : resp?.data,\n      response: resp,\n    });\n  }\n};\n\nconst resolvers: {\n  [key: string]: Array<{\n    resolve: Resolver;\n    reject: Rejector;\n    cancel: Canceller;\n    props: RequestProps<any, any, any, any>;\n  }>;\n} = {};\n\nconst resolver = (\n  resolver: {\n    resolve: Resolver;\n    reject: Rejector;\n    cancelled: boolean;\n    props: RequestProps<any, any, any, any>;\n  },\n  key: string | null,\n  resp: AxiosResponse | null,\n  error: FxError<any, any> | null,\n  startAt: Date,\n  cacheKey: string | null\n) => {\n  if (cacheKey && resolver.props.cacheMaxAge) {\n    cache.set(cacheKey, {data: resp?.data}, resolver.props.cacheMaxAge);\n  }\n\n  if (!key) {\n    const delay =\n      (resolver.props.delay || 0) - (new Date().getTime() - startAt.getTime());\n\n    setTimeout(() => {\n      resolving(resolver.resolve, resolver.reject, resolver.props, resp, error);\n    }, Math.max(delay, 0));\n    return;\n  }\n\n  const res = resolvers[key].splice(0, resolvers[key].length);\n\n  res.forEach(({resolve, reject, props}) => {\n    const delay =\n      (props.delay || 0) - (new Date().getTime() - startAt.getTime());\n\n    setTimeout(() => {\n      resolving(resolve, reject, props, resp, error);\n    }, Math.max(delay, 0));\n  });\n};\n\nconst dataMapper = (data: DataType | string | null | undefined) => {\n  if (!data) return data;\n  if (typeof data !== 'object') return data;\n  if (Array.isArray(data)) return data;\n\n  return Object.keys(data).reduce<{[key: string]: any}>((p, c) => {\n    if (typeof data[c] === 'object' && data[c] !== null) {\n      if ((data[c] as any).current instanceof HTMLElement) {\n        p[c] = (data[c] as any).current.value;\n      } else {\n        p[c] = dataMapper(data[c] as any);\n      }\n    } else if (typeof data[c] === 'bigint') {\n      p[c] = String(data[c]);\n    } else {\n      p[c] = data[c];\n    }\n    return p;\n  }, {});\n};\n\nexport function setDefaultHeaders(headers: {[key: string]: string}) {\n  axios.defaults.headers.common = Object.assign(\n    axios.defaults.headers.common,\n    headers\n  );\n}\n\nexport function setBaseUrl(url: string) {\n  axios.defaults.baseURL = url;\n}\n\nexport function setDefaultTransformResponse(trs: Array<(data: any) => any>) {\n  axios.defaults.transformResponse = trs;\n}\n\nexport function request<TR, TE, TRR, TER>(\n  props: RequestProps<TR, TE, TRR, TER>\n): PCancelable<FxResp<TR, TRR>> {\n  const cp = new PCancelable<FxResp<TR, TRR>>((resolve, reject, onCancel) => {\n    const cancel = () => {\n      cp.cancel();\n    };\n    const ct = axios.CancelToken.source();\n\n    const url = ((u, query) => {\n      const qs = queryString.stringify(query);\n      return u + (qs ? (u.includes('?') ? '&' : '?') + qs : '');\n    })(props.url, props.query || {});\n\n    const lazyGroup =\n      props.method === 'GET' && props.throttle\n        ? `${props.method} ${url} ${props.delay || 0}`\n        : null;\n\n    const cacheKey =\n      props.method === 'GET' && props.cacheMaxAge && props.cacheMaxAge > 0\n        ? `${props.method} ${props.url} ${props.cacheMaxAge}`\n        : null;\n    const cached = cacheKey && cache.get(cacheKey);\n\n    if (cached) {\n      resolver(\n        {resolve, reject, cancelled: false, props},\n        null,\n        cached as AxiosResponse,\n        null,\n        new Date(),\n        null\n      );\n      return;\n    }\n\n    onCancel.shouldReject = false;\n    onCancel(() => {\n      if (!lazyGroup || resolvers[lazyGroup].length === 1) {\n        ct.cancel();\n      }\n    });\n\n    setTimeout(() => {\n      if (lazyGroup) {\n        resolvers[lazyGroup] = resolvers[lazyGroup] || [];\n        resolvers[lazyGroup].push({resolve, reject, cancel, props});\n\n        // Duplicated `GET` request,\n        if (resolvers[lazyGroup].length > 1) {\n          return;\n        }\n      }\n\n      const start = new Date();\n\n      axios\n        .request<TR>({\n          cancelToken: ct.token,\n          method: props.method,\n          url,\n          headers: props.headers,\n          responseType: props.responseType,\n          data: dataMapper(\n            typeof props.data === 'function' ? props.data() : props.data\n          ),\n        })\n        .then(resp => {\n          resolver(\n            {resolve, reject, cancelled: cp.isCanceled, props},\n            lazyGroup,\n            resp,\n            null,\n            start,\n            cacheKey\n          );\n        })\n        .catch(err => {\n          resolver(\n            {resolve, reject, cancelled: cp.isCanceled, props},\n            lazyGroup,\n            null,\n            err,\n            start,\n            null\n          );\n        });\n    }, 25);\n  });\n\n  return cp;\n}\n","import PCancelable from 'p-cancelable';\nimport React, {Component, Suspense, useEffect, useState} from 'react';\nimport {request, FxApiRequest, FxResp, FxError} from '../request';\nimport {classNames} from '../utils';\n\ntype Renderer<T> = (data: T | null, reloaded?: boolean) => React.ReactNode;\ntype ErrorRenderer<T, TR> = (\n  data: TR | null,\n  error: FxError<T, TR>\n) => React.ReactNode;\ntype LoadingRenderer = () => React.ReactNode;\n\ntype LazyStatus = 'PENDING' | 'SUCCESS' | 'ERROR';\ninterface Lazy<TR, TE, TRR = TR, TER = TE> {\n  status: LazyStatus;\n  error: FxError<TE, TER> | null;\n  result: FxResp<TR, TRR> | null;\n}\n\ntype LazyResponse<TR, TE, TRR, TER> = {\n  status: LazyStatus;\n  result: FxResp<TR, TRR> | null;\n  error: FxError<TE, TER> | null;\n};\n\nfunction lazyResponse<TR, TE, TRR, TER>(\n  result: FxResp<TR, TRR> | null,\n  error: FxError<TE, TER> | null\n): () => LazyResponse<TR, TE, TRR, TER> {\n  return () => ({\n    status: error ? 'ERROR' : 'SUCCESS',\n    result,\n    error,\n  });\n}\n\nconst lazy = function <TR, TE, TRR = TR, TER = TE>(\n  release: ReleaseDelegateInternal,\n  p: PCancelable<FxResp<TR, TRR>>\n) {\n  let status: LazyStatus = 'PENDING';\n  let error: FxError<TE, TER> | null;\n  let result: FxResp<TR, TRR> | null;\n\n  p.then(res => {\n    if (p.isCanceled) return;\n    ({result, status, error} = lazyResponse<TR, TE, TRR, TER>(res, null)());\n    release(true);\n  }).catch(err => {\n    if (p.isCanceled) return;\n    ({result, status, error} = lazyResponse<TR, TE, TRR, TER>(null, err)());\n    release(false);\n  });\n\n  return (): Lazy<TR, TE, TRR, TER> => {\n    if (status === 'PENDING') throw p;\n\n    return {\n      status,\n      error,\n      result,\n    };\n  };\n};\n\ninterface FxGuardInnerProps<TR, TE, TRR, TER>\n  extends FxGuardProps<TR, TE, TRR, TER> {\n  releaseBusy: ReleaseDelegateInternal;\n  refreshId: number;\n  reloadId: number;\n}\n\nfunction FxGuardInner<TR, TE, TRR, TER>(\n  props: FxGuardInnerProps<TR, TE, TRR, TER>\n) {\n  const [prepared, setPrepared] = useState<\n    () => LazyResponse<TR, TE, TRR, TER>\n  >();\n  const {api, refreshId, reloadId, error, naked} = props;\n  const req = () => {\n    return request<TR, TE, TRR, TER>(\n      Object.assign(\n        {\n          throttle: api.throttle === false ? false : true,\n          refreshId,\n        },\n        props.api,\n        {\n          reducer: undefined,\n          errReducer: undefined,\n        }\n      )\n    );\n  };\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let rp: PCancelable<any> | undefined = undefined;\n\n    if (reloadId > 0) {\n      rp = req();\n\n      rp.then(res => {\n        if (rp?.isCanceled) return;\n\n        setPrepared(() => lazyResponse<TR, TE, TRR, TER>(res, null));\n        props.releaseBusy(true);\n      }).catch(err => {\n        if (rp?.isCanceled) return;\n\n        setPrepared(() => lazyResponse<TR, TE, TRR, TER>(null, err));\n        props.releaseBusy(false);\n      });\n    }\n\n    return () => {\n      if (rp) {\n        rp.cancel();\n      }\n    };\n  }, [reloadId]);\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    let rp: PCancelable<any> | undefined = undefined;\n\n    setPrepared(() => {\n      rp = req();\n\n      return lazy<TR, TE, TRR, TER>(props.releaseBusy, rp);\n    });\n\n    return () => {\n      if (rp) {\n        rp.cancel();\n      }\n    };\n  }, [api.method, api.url, refreshId]);\n\n  if (!prepared) return <></>;\n\n  const resp = prepared();\n\n  if (resp.status === 'ERROR') {\n    const rr = () => {\n      if (!resp.error?.response?.data) return null;\n      return props.api.errReducer\n        ? props.api.errReducer(resp.error?.response.data, resp.error)\n        : resp.error?.response.data;\n    };\n\n    const r = () => (\n      <>\n        {error && error(rr() as TER, resp.error!)}\n        {!error && <div>Error ({resp.error?.message})</div>}\n      </>\n    );\n\n    return (\n      <>\n        {naked && r()}\n        {!naked && <div className=\"flax fx-guard-error\">{r()}</div>}\n      </>\n    );\n  }\n\n  const rr = () => {\n    if (!resp.result?.data) return null;\n    return props.api.reducer\n      ? props.api.reducer(resp.result?.data)\n      : resp.result?.data;\n  };\n\n  return <>{props.render(rr() as TRR, props.refreshId > 0)}</>;\n}\n\ninterface FxGuardProps<TR, TE, TRR, TER> {\n  api: FxApiRequest<TR, TE, TRR, TER>;\n  render: Renderer<TRR>;\n  error?: ErrorRenderer<TE, TER>;\n  done?: ReleaseDelegate;\n  loading?: LoadingRenderer;\n  disableLoading?: boolean;\n  naked?: boolean;\n}\n\ntype ReleaseDelegate = (succeed?: boolean) => void;\ntype ReleaseDelegateInternal = (succeed: boolean) => void;\ninterface FxGuardStates {\n  refreshId: number;\n  reloadId: number;\n  busy: boolean;\n  silent: boolean;\n  className: string | undefined;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class FxGuard<TR = any, TE = any, TRR = TR, TER = TE> extends Component<\n  FxGuardProps<TR, TE, TRR, TER>,\n  FxGuardStates\n> {\n  constructor(props: FxGuardProps<TR, TE, TRR, TER>) {\n    super(props);\n\n    this.state = {\n      refreshId: 0,\n      reloadId: 0,\n      busy: true,\n      silent: false,\n      className: undefined,\n    };\n  }\n\n  reload(silent?: boolean, className?: string) {\n    if (this.state.busy) return;\n\n    if (silent) {\n      this.setState({\n        ...this.state,\n        reloadId: this.state.reloadId + 1,\n        busy: true,\n        silent: true,\n        className,\n      });\n      return;\n    }\n\n    this.setState({\n      ...this.state,\n      refreshId: this.state.refreshId + 1,\n      busy: true,\n      silent: false,\n      className: undefined,\n    });\n  }\n\n  releaseBusy(succeed: boolean) {\n    if (this.props.done) {\n      this.props.done(succeed);\n    }\n\n    this.setState({\n      ...this.state,\n      busy: false,\n      silent: false,\n      className: undefined,\n    });\n  }\n\n  render() {\n    const r = () => {\n      const rl = () => (\n        <>\n          {this.props.disableLoading && (\n            <>{this.props.render(null, this.state.refreshId > 0)}</>\n          )}\n          {this.props.loading && this.props.loading()}\n          {!this.props.loading && !this.props.disableLoading && (\n            <div\n              className={classNames('flax fx-guard-loader', {\n                '--silent': this.props.disableLoading,\n              })}\n            >\n              Loading ..\n            </div>\n          )}\n        </>\n      );\n\n      return (\n        <>\n          <Suspense\n            fallback={\n              <>\n                {this.props.naked && rl()}\n                {!this.props.naked && (\n                  <div\n                    className={classNames('flax fx-guard-loading', {\n                      '--silent': this.props.disableLoading,\n                    })}\n                  >\n                    {rl()}\n                  </div>\n                )}\n              </>\n            }\n          >\n            <FxGuardInner<TR, TE, TRR, TER>\n              releaseBusy={succeed => this.releaseBusy(succeed)}\n              refreshId={this.state.refreshId}\n              reloadId={this.state.reloadId}\n              api={this.props.api}\n              render={this.props.render}\n              error={this.props.error}\n              naked={this.props.naked}\n            />\n          </Suspense>\n        </>\n      );\n    };\n\n    return (\n      <>\n        {this.props.naked && r()}\n        {!this.props.naked && (\n          <div\n            className={classNames('flax fx-guard', {\n              '--loading': this.state.busy,\n              '--silent': this.state.silent,\n              [this.state.className || '--noname']: !!this.state.className,\n            })}\n          >\n            {r()}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n"],"names":[],"version":3,"file":"index.module.js.map"}