{"mappings":"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","sources":["./src/utils.ts","./src/components/FxNotification.tsx","./src/components/FxNotificationContainer.tsx","./src/request.ts","./src/components/FxButton.tsx","./src/components/FxGuard.tsx"],"sourcesContent":["export function classNames(\n  ...args: Array<\n    string | boolean | {[key: string]: boolean | undefined} | undefined | null\n  >\n): string {\n  return args\n    .reduce<Array<string>>((o, e) => {\n      if (typeof e === 'string' && e) o.push(e);\n      else if (Array.isArray(e)) o.push(classNames(e));\n      else if (e && typeof e === 'object') {\n        Object.keys(e).forEach(k => {\n          if (e[k]) o.push(k);\n        });\n      }\n\n      return o;\n    }, [])\n    .join(' ');\n}\n","import React, {useEffect} from 'react';\nimport ReactDOM, {render} from 'react-dom';\nimport {useNotificationContainer} from './FxNotificationContainer';\nimport {classNames} from '../utils';\n\nexport type FxNotificationType = 'SUCC' | 'WARN' | 'ERROR' | 'INFO';\nexport interface FxNotificationPayload {\n  type?: FxNotificationType;\n  title?: string;\n  message: string;\n}\nexport interface FxNotificationAttrs extends FxNotificationPayload {\n  delay?: number;\n}\nexport type FxNotificationToast = string | FxNotificationPayload;\n\ninterface UseNotificationProps {}\ninterface UseNotification {\n  container: HTMLElement;\n  alert: (attrs: FxNotificationPayload) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nexport function useNotification(props: UseNotificationProps): UseNotification {\n  const {container} = useNotificationContainer();\n\n  return {\n    container,\n    alert: (attrs: FxNotificationAttrs) => {\n      const {delay, ...props} = attrs;\n      const wrapper = document.createElement('div');\n      wrapper.classList.add('fx-notification-wrapper');\n      container.appendChild(wrapper);\n      render(<FxNotification {...props} />, wrapper);\n\n      setTimeout(() => {\n        wrapper.classList.add('--hide');\n        setTimeout(() => {\n          ReactDOM.unmountComponentAtNode(wrapper);\n          wrapper.remove();\n        }, 450);\n      }, delay || 3000);\n    },\n  };\n}\n\nfunction Type(type: FxNotificationType) {\n  if (!type || type === 'INFO') return null;\n\n  return (\n    <div className=\"--icon\">\n      {type === 'SUCC' && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M5 13l4 4L19 7\"\n          />\n        </svg>\n      )}\n      {type === 'WARN' && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n          />\n        </svg>\n      )}\n      {type === 'ERROR' && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M6 18L18 6M6 6l12 12\"\n          />\n        </svg>\n      )}\n    </div>\n  );\n  //if (type === 'WARN') return <div>W</div>;\n  //if (type === 'ERROR') return <div>E</div>;\n}\n\ninterface FxNotificationProps extends FxNotificationPayload {}\n\nexport function FxNotification(props: FxNotificationProps) {\n  const {type, title, message} = props;\n\n  useEffect(() => {\n    // Initialize\n\n    return () => {\n      // Clear\n    };\n  });\n\n  return (\n    <>\n      <div\n        className={classNames(\n          'flax fx-notification',\n          `--${(type || 'info').toLocaleLowerCase()}`\n        )}\n      >\n        {type && Type(type)}\n        {title && <strong>{title}</strong>}\n        {message}\n      </div>\n    </>\n  );\n}\n","interface UseNotificationContainer {\n  container: HTMLElement;\n}\n\nconst fxNotificationContainerId = 'fx-notification-container';\nexport function useNotificationContainer(): UseNotificationContainer {\n  const container =\n    document.getElementById(fxNotificationContainerId) ||\n    (() => {\n      const dom = document.createElement('div');\n      dom.id = fxNotificationContainerId;\n      dom.classList.add('flax');\n      dom.classList.add('fx-notification-container');\n      document.body.appendChild(dom);\n\n      return dom;\n    })();\n\n  return {\n    container,\n  };\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport axios, {AxiosError, AxiosResponse, ResponseType} from 'axios';\nimport LRU from 'lru-cache';\nimport queryString from 'query-string';\nimport {MutableRefObject} from 'react';\n\nconst cache = new LRU({max: 100, maxAge: 1000 * 60 * 10});\n\ntype QueryType = string | number | boolean;\ntype Queries = {[key: string]: QueryType | QueryType[]};\ntype Headers = {[key: string]: string};\ntype DataTypeValues = string | number | boolean | null;\ntype DataType = {\n  [key: string]:\n    | DataTypeValues\n    | MutableRefObject<HTMLElement | null>\n    | DataType;\n};\ntype Data = DataType | (() => DataType) | string;\n\nexport type FxResp<T, TR> = {data: T; reduced: TR; response: AxiosResponse<T>};\n\ninterface FxErrorResponse<T, TR> extends AxiosResponse<T> {\n  reduced: TR;\n}\n\nexport interface FxError<T, TR> extends AxiosError<T> {\n  response?: FxErrorResponse<T, TR>;\n}\n\nexport interface FxApiRequest<TR = any, TE = any, TRR = TR, TER = TE> {\n  method: 'GET' | 'POST' | 'DELETE' | 'PATCH' | 'PUT';\n  url: string;\n  cacheMaxAge?: number;\n  throttle?: boolean;\n  delay?: number;\n  responseType?: ResponseType;\n  query?: Queries;\n  headers?: Headers;\n  data?: Data;\n  reducer?: (data: TR) => TRR;\n  errReducer?: (data: TE, error: AxiosError<TE>) => TER;\n}\n\ninterface RequestProps<TR, TE, TRR, TER>\n  extends FxApiRequest<TR, TE, TRR, TER> {\n  refreshId?: number;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype Resolver = (data: any) => void;\ntype Rejector = (reason: Error) => void;\n\nconst resolving = (\n  resolve: Resolver,\n  reject: Rejector,\n  props: RequestProps<any, any, any, any>,\n  resp: AxiosResponse | null,\n  error: FxError<any, any> | null\n) => {\n  if (error) {\n    if (error.response?.data) {\n      if (props.errReducer) {\n        error.response.reduced = props.errReducer(error.response?.data, error);\n      } else {\n        error.response.reduced = error.response?.data;\n      }\n    }\n\n    reject(error);\n  } else {\n    resolve({\n      data: resp?.data,\n      reduced: props.reducer ? props.reducer(resp?.data) : resp?.data,\n      response: resp,\n    });\n  }\n};\n\nconst resolvers: {\n  [key: string]: Array<{\n    resolve: Resolver;\n    reject: Rejector;\n    props: RequestProps<any, any, any, any>;\n  }>;\n} = {};\n\nconst resolver = (\n  resolver: {\n    resolve: Resolver;\n    reject: Rejector;\n    props: RequestProps<any, any, any, any>;\n  },\n  key: string | null,\n  resp: AxiosResponse | null,\n  error: FxError<any, any> | null,\n  startAt: Date,\n  cacheKey: string | null\n) => {\n  if (cacheKey && resolver.props.cacheMaxAge) {\n    cache.set(cacheKey, {data: resp?.data}, resolver.props.cacheMaxAge);\n  }\n\n  if (!key) {\n    const delay =\n      (resolver.props.delay || 0) - (new Date().getTime() - startAt.getTime());\n\n    setTimeout(() => {\n      resolving(resolver.resolve, resolver.reject, resolver.props, resp, error);\n    }, Math.max(delay, 0));\n    return;\n  }\n\n  const res = resolvers[key].splice(0, resolvers[key].length);\n\n  res.forEach(({resolve, reject, props}) => {\n    const delay =\n      (props.delay || 0) - (new Date().getTime() - startAt.getTime());\n\n    setTimeout(() => {\n      resolving(resolve, reject, props, resp, error);\n    }, Math.max(delay, 0));\n  });\n};\n\nconst dataMapper = (data: DataType | string | null | undefined) => {\n  if (!data) return data;\n  if (typeof data !== 'object') return data;\n\n  return Object.keys(data).reduce<{[key: string]: any}>((p, c) => {\n    if (typeof data[c] === 'object') {\n      if ((data[c] as any).current instanceof HTMLElement) {\n        p[c] = (data[c] as any).current.value;\n      } else {\n        p[c] = dataMapper(data[c] as any);\n      }\n    } else {\n      p[c] = data[c];\n    }\n    return p;\n  }, {});\n};\n\nfunction setDefaultHeader(key: string, val: string) {\n  axios.defaults.headers.common[key] = val;\n}\n\nexport function setDefaultHeaders(headers: Array<{[key: string]: string}>) {\n  headers.forEach(e => {\n    const key = e.key;\n    const val = e.val;\n\n    setDefaultHeader(key, val);\n  })\n}\n\nexport function request<TR, TE, TRR, TER>(\n  props: RequestProps<TR, TE, TRR, TER>\n): Promise<FxResp<TR, TRR>> {\n  return new Promise<FxResp<TR, TRR>>((resolve, reject) => {\n    setTimeout(() => {\n      const url = ((u, query) => {\n        const qs = queryString.stringify(query);\n        return u + (qs ? (u.includes('?') ? '&' : '?') + qs : '');\n      })(props.url, props.query || {});\n\n      const cacheKey =\n        props.method === 'GET' && props.cacheMaxAge && props.cacheMaxAge > 0\n          ? `${props.method} ${props.url} ${props.cacheMaxAge}`\n          : null;\n      const cached = cacheKey && cache.get(cacheKey);\n\n      if (cached) {\n        resolver(\n          {resolve, reject, props},\n          null,\n          cached as AxiosResponse,\n          null,\n          new Date(),\n          null\n        );\n        return;\n      }\n\n      const lazyGroup =\n        props.method === 'GET' && props.throttle\n          ? `${props.method} ${url} ${props.delay || 0}`\n          : null;\n\n      if (lazyGroup) {\n        resolvers[lazyGroup] = resolvers[lazyGroup] || [];\n        resolvers[lazyGroup].push({resolve, reject, props});\n\n        // Duplicated `GET` request,\n        if (resolvers[lazyGroup].length > 1) {\n          return;\n        }\n      }\n\n      const start = new Date();\n\n      axios\n        .request<TR>({\n          method: props.method,\n          url,\n          headers: props.headers,\n          responseType: props.responseType,\n          data: dataMapper(\n            typeof props.data === 'function' ? props.data() : props.data\n          ),\n        })\n        .then(resp => {\n          resolver(\n            {resolve, reject, props},\n            lazyGroup,\n            resp,\n            null,\n            start,\n            cacheKey\n          );\n        })\n        .catch(err => {\n          resolver({resolve, reject, props}, lazyGroup, null, err, start, null);\n        });\n    }, 25);\n  });\n}\n","import {AxiosResponse} from 'axios';\nimport React, {Component, ReactNode} from 'react';\nimport {\n  FxNotificationType,\n  FxNotificationToast,\n  useNotification,\n} from './FxNotification';\nimport {FxApiRequest, request} from '../request';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Notifiable = FxNotificationToast | any;\nexport type DoneDelegate<T> = (\n  res: T | null,\n  error: Error | null,\n  resp?: AxiosResponse | null\n) => Notifiable;\nexport type SucceedDelegate<T> = (data: T, resp: AxiosResponse) => Notifiable;\nexport type ErrorDelegate<T> = (data: T, error: AxiosResponse<T>) => Notifiable;\n\ninterface FxButtonProps<TR, TE, TRR, TER> {\n  children?: ReactNode;\n  className?: string;\n  label?: string;\n\n  api: FxApiRequest<TR, TE, TRR, TER>;\n  done?: DoneDelegate<TR>;\n  success?: SucceedDelegate<TRR>;\n  error?: ErrorDelegate<TER>;\n}\n\ninterface FxButtonStates {\n  busy: boolean;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class FxButton<TR = any, TE = any, TRR = TR, TER = TE> extends Component<\n  FxButtonProps<TR, TE, TRR, TER>,\n  FxButtonStates\n> {\n  constructor(props: FxButtonProps<TR, TE, TRR, TER>) {\n    super(props);\n\n    this.state = {\n      busy: false,\n    };\n  }\n\n  private noti(payload: Notifiable, type: FxNotificationType) {\n    if (!payload) return;\n    if (typeof payload === 'string') {\n      payload = {\n        message: payload,\n      };\n    }\n\n    if (!payload.message) return;\n    payload.type = payload.type || type;\n\n    const {alert: notiAlert} = useNotification({});\n    notiAlert(payload);\n  }\n\n  handleClick() {\n    if (this.state.busy) return;\n\n    this.setState({...this.state, busy: true});\n\n    const {success, error, done} = this.props;\n\n    request<TR, TE, TRR, TER>({...this.props.api})\n      .then(res => {\n        this.noti(success && success(res.reduced, res.response), 'SUCC');\n        this.noti(done && done(res.data, null, res.response), 'INFO');\n        this.setState({...this.state, busy: false});\n      })\n      .catch(err => {\n        const type =\n          typeof err.response?.status === 'number' && err.response?.status < 500\n            ? 'WARN'\n            : 'ERROR';\n        this.noti(error && error(err.response?.reduced, err), type);\n        this.noti(done && done(err.response?.data, err, err.response), type);\n        this.setState({...this.state, busy: false});\n      });\n  }\n\n  render() {\n    return (\n      <button\n        className=\"flax fx-button\"\n        onClick={() => this.handleClick()}\n        disabled={this.state.busy}\n      >\n        {this.props.children || this.props.label}\n      </button>\n    );\n  }\n}\n","import React, {Component, Suspense, useEffect, useState} from 'react';\nimport {request, FxApiRequest, FxResp, FxError} from '../request';\nimport {classNames} from '../utils';\n\ntype Renderer<T> = (data: T | null, reloaded?: boolean) => React.ReactNode;\ntype ErrorRenderer<T, TR> = (\n  data: TR | null,\n  error: FxError<T, TR>\n) => React.ReactNode;\ntype LoadingRenderer = () => React.ReactNode;\n\ntype LazyStatus = 'PENDING' | 'SUCCESS' | 'ERROR';\ninterface Lazy<TR, TE, TRR = TR, TER = TE> {\n  status: LazyStatus;\n  error: FxError<TE, TER> | null;\n  result: FxResp<TR, TRR> | null;\n}\n\ntype LazyResponse<TR, TE, TRR, TER> = {\n  status: LazyStatus;\n  result: FxResp<TR, TRR> | null;\n  error: FxError<TE, TER> | null;\n};\n\nfunction lazyResponse<TR, TE, TRR, TER>(\n  result: FxResp<TR, TRR> | null,\n  error: FxError<TE, TER> | null\n): () => LazyResponse<TR, TE, TRR, TER> {\n  return () => ({\n    status: error ? 'ERROR' : 'SUCCESS',\n    result,\n    error,\n  });\n}\n\nconst lazy = function <TR, TE, TRR = TR, TER = TE>(\n  release: ReleaseDelegateInternal,\n  p: Promise<FxResp<TR, TRR>>\n) {\n  let status: LazyStatus = 'PENDING';\n  let error: FxError<TE, TER> | null;\n  let result: FxResp<TR, TRR> | null;\n\n  p.then(res => {\n    ({result, status, error} = lazyResponse<TR, TE, TRR, TER>(res, null)());\n    release(true);\n  }).catch(err => {\n    ({result, status, error} = lazyResponse<TR, TE, TRR, TER>(null, err)());\n    release(false);\n  });\n\n  return (): Lazy<TR, TE, TRR, TER> => {\n    if (status === 'PENDING') throw p;\n\n    return {\n      status,\n      error,\n      result,\n    };\n  };\n};\n\ninterface FxGuardInnerProps<TR, TE, TRR, TER>\n  extends FxGuardProps<TR, TE, TRR, TER> {\n  releaseBusy: ReleaseDelegateInternal;\n  refreshId: number;\n  reloadId: number;\n}\n\nfunction FxGuardInner<TR, TE, TRR, TER>(\n  props: FxGuardInnerProps<TR, TE, TRR, TER>\n) {\n  const [prepared, setPrepared] = useState<\n    () => LazyResponse<TR, TE, TRR, TER>\n  >();\n  const {api, refreshId, reloadId, error, naked} = props;\n  const req = () => {\n    return request<TR, TE, TRR, TER>(\n      Object.assign(\n        {\n          throttle: api.throttle === false ? false : true,\n          refreshId,\n        },\n        props.api,\n        {\n          reducer: undefined,\n          errReducer: undefined,\n        }\n      )\n    );\n  };\n\n  useEffect(() => {\n    if (reloadId > 0) {\n      req()\n        .then(res => {\n          setPrepared(() => lazyResponse<TR, TE, TRR, TER>(res, null));\n          props.releaseBusy(true);\n        })\n        .catch(err => {\n          setPrepared(() => lazyResponse<TR, TE, TRR, TER>(null, err));\n          props.releaseBusy(false);\n        });\n    }\n  }, [reloadId]);\n\n  useEffect(() => {\n    setPrepared(() => lazy<TR, TE, TRR, TER>(props.releaseBusy, req()));\n  }, [api.method, api.url, refreshId]);\n\n  if (!prepared) return <></>;\n\n  const resp = prepared();\n\n  if (resp.status === 'ERROR') {\n    const rr = () => {\n      if (!resp.error?.response?.data) return null;\n      return props.api.errReducer\n        ? props.api.errReducer(resp.error?.response.data, resp.error)\n        : resp.error?.response.data;\n    };\n\n    const r = () => (\n      <>\n        {error && error(rr() as TER, resp.error!)}\n        {!error && <div>Error ({resp.error?.message})</div>}\n      </>\n    );\n\n    return (\n      <>\n        {naked && r()}\n        {!naked && <div className=\"flax fx-guard-error\">{r()}</div>}\n      </>\n    );\n  }\n\n  const rr = () => {\n    if (!resp.result?.data) return null;\n    return props.api.reducer\n      ? props.api.reducer(resp.result?.data)\n      : resp.result?.data;\n  };\n\n  return <>{props.render(rr() as TRR, props.refreshId > 0)}</>;\n}\n\ninterface FxGuardProps<TR, TE, TRR, TER> {\n  api: FxApiRequest<TR, TE, TRR, TER>;\n  render: Renderer<TRR>;\n  error?: ErrorRenderer<TE, TER>;\n  done?: ReleaseDelegate;\n  loading?: LoadingRenderer;\n  disableLoading?: boolean;\n  naked?: boolean;\n}\n\ntype ReleaseDelegate = (succeed?: boolean) => void;\ntype ReleaseDelegateInternal = (succeed: boolean) => void;\ninterface FxGuardStates {\n  refreshId: number;\n  reloadId: number;\n  busy: boolean;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class FxGuard<TR = any, TE = any, TRR = TR, TER = TE> extends Component<\n  FxGuardProps<TR, TE, TRR, TER>,\n  FxGuardStates\n> {\n  constructor(props: FxGuardProps<TR, TE, TRR, TER>) {\n    super(props);\n\n    this.state = {\n      refreshId: 0,\n      reloadId: 0,\n      busy: false,\n    };\n  }\n\n  reload(silent?: boolean) {\n    if (this.state.busy) return;\n\n    if (silent) {\n      this.setState({\n        ...this.state,\n        reloadId: this.state.reloadId + 1,\n        busy: true,\n      });\n      return;\n    }\n\n    this.setState({\n      ...this.state,\n      refreshId: this.state.refreshId + 1,\n      busy: true,\n    });\n  }\n\n  releaseBusy(succeed: boolean) {\n    if (this.props.done) {\n      this.props.done(succeed);\n    }\n\n    this.setState({\n      ...this.state,\n      busy: false,\n    });\n  }\n\n  render() {\n    const r = () => {\n      const rl = () => (\n        <>\n          {this.props.disableLoading && (\n            <>{this.props.render(null, this.state.refreshId > 0)}</>\n          )}\n          {this.props.loading && this.props.loading()}\n          {!this.props.loading && !this.props.disableLoading && (\n            <div className=\"flax fx-guard-loader\">Loading ..</div>\n          )}\n        </>\n      );\n\n      return (\n        <>\n          <Suspense\n            fallback={\n              <>\n                {this.props.naked && rl()}\n                {!this.props.naked && (\n                  <div className=\"flax fx-guard-loading\">{rl()}</div>\n                )}\n              </>\n            }\n          >\n            <FxGuardInner<TR, TE, TRR, TER>\n              releaseBusy={succeed => this.releaseBusy(succeed)}\n              refreshId={this.state.refreshId}\n              reloadId={this.state.reloadId}\n              api={this.props.api}\n              render={this.props.render}\n              error={this.props.error}\n              naked={this.props.naked}\n            />\n          </Suspense>\n        </>\n      );\n    };\n\n    return (\n      <>\n        {this.props.naked && r()}\n        {!this.props.naked && (\n          <div\n            className={classNames('flax fx-guard', {\n              '--loading': this.state.busy,\n            })}\n          >\n            {r()}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n"],"names":["classNames","args","reduce","o","e","push","Array","isArray","Object","keys","forEach","k","join","useNotification","props","container","document","getElementById","dom","createElement","id","classList","add","body","appendChild","alert","attrs","delay","$e7fec36b5f3c6c5f72ba24052fba095$var$_objectWithoutProperties","wrapper","render","_react","$e7fec36b5f3c6c5f72ba24052fba095$export$FxNotification","setTimeout","ReactDOM","unmountComponentAtNode","remove","FxNotification","type","title","message","useEffect","Fragment","className","$b822a06f4acd7f086e665899dc946fe$export$classNames","concat","toLocaleLowerCase","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Type","cache","LRU","max","maxAge","resolving","resolve","reject","resp","error","_error$response","_error$response2","_error$response3","response","data","errReducer","reduced","reducer","resolvers","resolver","key","startAt","cacheKey","cacheMaxAge","set","Date","getTime","Math","splice","length","dataMapper","p","c","current","HTMLElement","value","setDefaultHeaders","headers","val","axios","defaults","common","setDefaultHeader","request","Promise","url","u","query","qs","queryString","stringify","includes","method","cached","get","lazyGroup","throttle","start","responseType","then","catch","err","FxButton","Component","constructor","super","this","state","busy","noti","payload","notiAlert","$e7fec36b5f3c6c5f72ba24052fba095$export$useNotification","handleClick","setState","$cff2b6d75cbbcf34f8ecc2d690e62f7a$var$_objectSpread","success","done","$e37d50e173cfeed719d55c3076a8beab$export$request","api","res","_err$response","_err$response2","_err$response3","_err$response4","status","onClick","disabled","children","label","lazyResponse","result","FxGuardInner","prepared","setPrepared","useState","refreshId","reloadId","naked","req","assign","undefined","releaseBusy","release","lazy","rr","_resp$error","_resp$error$response","_resp$error2","_resp$error3","r","_resp$error4","_resp$result","_resp$result2","_resp$result3","FxGuard","reload","silent","$b3391a37da12f524ec061e62849b526d$var$_objectSpread","succeed","rl","disableLoading","loading","Suspense","fallback","$b3391a37da12f524ec061e62849b526d$var$FxGuardInner","--loading"],"version":3,"file":"index.module.js.map"}